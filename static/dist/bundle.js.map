{"version":3,"sources":["utils.js","player.js","prefdefaults.json","unbundle.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["formatDuration","seconds","Math","floor","curSecs","out","toString","padStart","localizedFuncs","EventEmitter","require","hasArtist","hasMultipleArtists","i18n","ex","loadAllContentHandlers","settings","get","map","getBestContentHandler","uris","ch","uriList","split","i","length","j","canHandle","contentPlayerCache","PlayerComponent","React","Component","constructor","props","preparedState","itemName","__","position","itemLength","enabled","userDragging","internalPlaylist","playerType","paused","name","controller","state","tick","playNextSong","player","setState","curTime","getCurrentTime","console","log","componentDidMount","registerEvents","tickInterval","setInterval","bind","componentWillUnmount","clearInterval","setNewController","ee","playSong","songData","contentURI","uri","prefferedPlayer","prefferedPlayerKey","SelectedPlayer","metadata","JSON","parse","id","unload","baseOpts","document","window","emitter","additionalOpts","optsKey","init","load","play","start","setCurrentTime","newPlaylist","Array","from","stringify","nextSong","shift","emit","setPaused","togglePause","resume","pause","playerEventsRegistered","oThis","on","updateItem","push","duration","getDuration","updateDuration","type","params","properties","includes","itemMadeBy","artist","end","userChangePos","ev","newVal","time","userDragStart","userDragEnd","render","getLocale","styles","playerTitle","playerItemMadeBy","module","exports","is","ipcRenderer","Store","warn","defaults","prefdefaults","songViewHeaders","$","regeneratorRuntime","documentID","random","musicServer","capitlizeFirst","string","charAt","toUpperCase","slice","serialize","obj","str","p","encodeURIComponent","join","calcColClass","cols","Alert","placeholder","item","key","ResultView","PureComponent","pageIndex","pageData","connectionFailedSnackbarOpen","columns","columnHeaders","colHeaders","unlocalizedName","something","search","componentDidUpdate","prevProps","query","info","componentThis","updateSearchInterval","hideConnectionFailureSnackbar","showConnectionFailureSnackbar","handleConnectionFailureSnackbarClose","event","reason","pageSize","resp","fetch","limit","offset","json","status","data","onRowClickActivator","index","onRowClick","outerThis","colgenerator","elem","renderCols","comps","tableHead","Paper","PlaylistView","searchBoxValue","fetchSearch","searchValue","target","value","onItemClick","e","SongView","createSongNameCol","createSongArtistCol","createDurationCol","classes","colGenerators","handleRowClick","rowData","HomeComponent","stateChange","settingsStyles","theme","popover","pointerEvents","paper","padding","spacing","buttonrow","margin","settingsGrid","SettingsView","curDisplayConfig","setDisplayConfig","useState","copyOfSettings","settingsPair","applying","setApplying","internalServerOnline","setInternalServerOnline","applyFinishSnackbarOpen","setApplyFinishedSnackbarOpen","showApplyFinishSnackbar","hideApplyFinishSnackbar","saveConfig","keys","Object","has","set","setTimeout","jokeAnchorEl","setJokeAnchorEl","handleJokePopoverOpen","currentTarget","handleJokePopoverClose","jokePopoverOpen","Boolean","toggleTelemetryJokeSwitch","newConfig","checked","updateDisplayConfig","createSwitchFunction","toggleKey","outputFunc","updateSnackbarHideDuration","newDuration","handleThemeChange","updateInternalServerState","online","useEffect","removeListener","startInternalServer","send","stopInternalServer","optionSpacing","explainationXS","optionFormXS","backdrop","vertical","horizontal","location","reload","MainDrawerComponent","triggerView","viewName","setCurView","drawerToggle","MainComponent","useDarkMode","useMemo","palette","serversAnchorEl","setServersAnchorEl","drawerOpen","setDrawerOpen","toggleDrawer","handleMenu","handleClose","curView","serversOpen","changeController","views","playlists","songs","homeview","debug","stylesSet","root","flexGrow","title","menuButton","marginRight","setServer","comp","customTitlebar","Titlebar","backgroundColor","Color","fromHex","development","remove","ReactDOM","getElementById"],"mappings":"AIAA,ACAA,AHAA4H,MAAM,CAACC,OAAP,GAAiB;AECjB,ACAA,AHAI,cAAY,EADC;AEEjB,ACAA,AHAI,ACFJ,8BDEgC,IAFf;AEGjB,ACAA,AHAI,UAAQ,IAHK;AEIjB,ACAA,AHAI,ACHJ,4BDG6B,CAAC,0CAAD,CAJZ;AEKjB,ACAA,AHAI,yBAAsB,uCALT;AEMjB,ACAA,AHAI,ACGJ,aDHc,IANG;AEOjB,ACAA,AJPA,ACOI,AFPJ,kBEOmB,oBAPF;AEQjB,ACAA,AHAI,ACEJ,AHTA,SAAS7H,cAAT,CAAwBC,GEOI,IFP5B,EAAiC,oCEDhB;AESjB,ACAA,AJRA,ACQI,AFPHA,EAAAA,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWF,CEOG,KATR,CFEN,CAAV;AIQD,ACAA,AHAI,ACCJ,yBDD0B,GAVT;AEWjB,ACAA,AJLA,ACKI,AFRH,MAAG,CAACA,OAAJ,EAAY,QEQY,GAXR;AEYjB,ACAA,AHAI,ACAJ,AHRE,WAAO,KAAP,KEQoB,KAZL;AEajB,ACAA,AJLA,ACKI,AFRF,oBEQmB,GAbJ;AEcjB,ACAA,AHAI,ACDJ,iBDCkB,QAdD;AEejB,ACAA,AJLA,ACKI,AFTH,MAAIG,OAAO,GAAGH,OAAd,YESmC,YAfnB;AEgBjB,ACAA,AHAI,ACKJ,AHdC,MAAII,GAAG,GAAG,EAAV,KESmB;AECpB,ACAA,AJNA,ACXiB,CAAjB;AEkBA,ACAA,AFIA,AHdC,MAAID,OAAO,GAAG,KAAK,EAAnB,EAAuB;AIWxB,ACAA,AJPA,ADHEC,IAAAA,GAAG,IAAIH,IAAI,CAACC,KAAL,CAAWC,OAAO,IAAI,KAAK,EAAT,CAAlB,IAAkC,GAAzC;AIWF,ACAA,AFGA,AHbEA,IAAAA,OAAO,GAAGA,OAAO,IAAI,KAAK,EAAT,CAAjB;AIWF,ACAA,AJPA,ADHE;AIWF,ACAA,AFEA;ACDA,ACAA,AJRA,ADHCC,EAAAA,GAAG,IACFH,IAAI,CAACC,KAAL,CAAWC,OAAO,GAAG,EAArB,EACEE,QADF,GAEEC,QAFF,CAEW,CAFX,EAEc,GAFd,IAGA,GAHA,GAIA,CAACH,OAAO,GAAG,EAAX,EAAeE,QAAf,GAA0BC,QAA1B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","file":"bundle.js","sourceRoot":"..","sourcesContent":["// Localizations\nfunction formatDuration(seconds) {\n\tseconds = Math.floor(seconds);\n\tif(!seconds){\n\t\treturn \"---\";\n\t}\n\tlet curSecs = seconds;\n\tlet out = \"\";\n\tif (curSecs > 60 * 60) {\n\t\tout += Math.floor(curSecs / (60 * 60)) + \":\";\n\t\tcurSecs = curSecs % (60 * 60);\n\t}\n\tout +=\n\t\tMath.floor(curSecs / 60)\n\t\t\t.toString()\n\t\t\t.padStart(2, \"0\") +\n\t\t\":\" +\n\t\t(curSecs % 60).toString().padStart(2, \"0\");\n\treturn out;\n}\nconst localizedFuncs = {\n    \"en\":{\n        formatDuration: formatDuration\n    }\n}\nexport {localizedFuncs};","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n// Fonts (broken currently)\n// import \"fontsource-roboto\";\n// Styles\n\nimport styles from \"./player.module.css\";\n// Text Stuff\nimport Typography from \"@material-ui/core/Typography\";\n// Grid Utils\nimport Grid from \"@material-ui/core/Grid\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Box from '@material-ui/core/Box';\n// Widgets\nimport Slider from \"@material-ui/core/Slider\";\nimport Fab from '@material-ui/core/Fab';\n// Icons\nimport PauseIcon from \"@material-ui/icons/Pause\";\nimport PlayArrowIcon from \"@material-ui/icons/PlayArrow\";\n// Get localized functions\nimport { localizedFuncs } from \"./utils.js\";\n// Event Emitter\nconst EventEmitter = require('events');\n\n// React Player to be imported\n// Meant to be reusable in other contexts\nconst hasArtist = [\"Song\"];\nconst hasMultipleArtists = [\"Album\"]; // Playlists are usually user created so they will have a variety of artists\nif (!i18n) {\n\ttry {\n\t\tvar i18n = require(\"i18n\");\n\t} catch (ex) {\n\t\tvar i18n = null; // Allow custom instances to be added later.\n\t}\n} // Might already be init\nfunction loadAllContentHandlers(settings){\n\treturn settings.get(\"enabledContentHandlers\").map(require);\n}\nfunction getBestContentHandler(uris,ch){\n\t// Earlier in the protocol string the better\n\t// Comma seperated URIs are not fully supported yet\n\tlet uriList = uris.split(\",\");\n\tfor(let i = 0; i < uriList.length; i ++){\n\t\tfor(let j = 0; j < ch.length; j ++){\n\t\t\tif(ch[j].canHandle(uriList[i])){\n\t\t\t\treturn [uriList[i],ch[j]];\n\t\t\t}\n\t\t}\n\t}\n}\n\n\nlet contentPlayerCache = {};\nclass PlayerComponent extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props); // Deprecated but needed\n\t\tlet preparedState = {\n\t\t\titemName: i18n.__(\"Nothing Playing\"),\n\t\t\tposition: 0,\n\t\t\titemLength: 0,\n\t\t\tlength: 1200,\n\t\t\tenabled: false,\n\t\t\tuserDragging: false, // Do not update while user is dragging\n\t\t\tinternalPlaylist: [],\n\t\t\tplayerType: \"none\",\n\t\t\tpaused: true\n\t\t};\n\t\tif (props.name) {\n\t\t\tpreparedState[\"name\"] = props.name;\n\t\t\tpreparedState[\"enabled\"] = true;\n\t\t}\n\t\tif(props.controller){\n\t\t\tpreparedState[\"controller\"] = props.controller;\n\t\t}else{\n\t\t\tpreparedState[\"controller\"] = new EventEmitter();\n\t\t}\n\t\tthis.state = preparedState;\n\t}\n\ttick(){\n\t\tif(!this.state.enabled && this.state.internalPlaylist.length > 0){\n\t\t\tthis.playNextSong();\n\t\t}\n\t\tif(!this.state.player){\n\t\t\t//console.log(\"tick aborted, due to no player\");\n\t\t\treturn;\n\t\t}\n\t\t//console.log(\"Ticking\");\n\t\t\n\t\tif(!this.state.userDragging){\n\t\t\t// console.log('user is not dragging');\n\t\t\tthis.setState(function (state, props) {\n\t\t\t\tlet curTime = this.state.player.getCurrentTime();\n\t\t\t\tconsole.log(\"Set current time to\",curTime);\n\t\t\t\treturn { position:curTime};\n\t\t\t});\n\t\t}\n\t\t\n\t}\n\tcomponentDidMount() {\n\t\tthis.registerEvents(this.state.controller);\n\t\tthis.tickInterval = setInterval(this.tick.bind(this),this.props.settings.get(\"playerTickrate\"));\n\t}\n\tcomponentWillUnmount(){\n\t\tif(this.tickInterval){\n\t\t\tclearInterval(this.tickInterval);\n\t\t}\n\t}\n\tsetNewController(ee){\n\t\tthis.setState(function (state, props) {\n\t\t\treturn { controller:ee };\n\t\t});\n\t}\n\tasync playSong(songData){\n\t\t// Does not check queue\n\t\tlet uris = songData.contentURI;\n\t\t// TODO: NOT DEPEND ON REQUIRE CACHE\n\t\tlet [uri,ch] = getBestContentHandler(uris, loadAllContentHandlers(this.props.settings));\n\t\tlet prefferedPlayer = this.props.settings.get(ch.prefferedPlayerKey);\n\t\tlet SelectedPlayer = require(prefferedPlayer);\n\t\tlet player;\n\t\tlet metadata = JSON.parse(songData.metadata);\n\n\t\tif(this.state.playerType != SelectedPlayer.id){\n\t\t\tif(this.state.player && this.state.player.unload){\n\t\t\t\tawait this.state.player.unload();\n\t\t\t}\n\t\t\tlet baseOpts = {document:document,window:window,emitter:this.state.controller};\n\t\t\tlet additionalOpts = this.props.settings.get(SelectedPlayer.optsKey);\n\t\t\tif(!additionalOpts){\n\t\t\t\tadditionalOpts = {};\n\t\t\t}\n\t\t\tplayer = new SelectedPlayer({...baseOpts,...additionalOpts});\n\t\t\tawait player.init();\n\t\t}else{\n\t\t\tplayer = this.state.player; // Get existing player\n\t\t}\n\t\tconsole.log('INFO: Init Finished');\n\t\tawait player.load(uri);\n\t\tconsole.log(\"INFO: Loaded uri into player\");\n\t\tawait player.play();\n\t\tif(metadata.start){\n\t\t\tawait player.setCurrentTime(metadata.start); // Seek!\n\t\t}\n\t\tconsole.log(\"INFO: Playing\")\n\t\tthis.setState(function (state, props) {\n\t\t\treturn {player: player,playerType:SelectedPlayer.id}\n\t\t});\n\t}\n\tplayNextSong(){\n\t\tif(this.state.internalPlaylist.length == 0){\n\t\t\tthis.setState(function (state, props) {\n\t\t\t\treturn {enabled: false};\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tlet newPlaylist = Array.from(this.state.internalPlaylist);\n\t\tconsole.log(JSON.stringify(newPlaylist));\n\t\tlet nextSong = newPlaylist.shift();\n\t\tthis.setState(function (state, props) {\n\t\t\treturn {internalPlaylist: newPlaylist};\n\t\t});\n\t\tthis.state.controller.emit(\"playSong\",nextSong);\n\t}\n\tsetPaused(paused){\n\t\tthis.setState(function (state, props) {\n\t\t\treturn {paused:paused};\n\t\t});\n\t}\n\ttogglePause(){\n\t\tif(!this.state.player || !this.state.enabled){\n\t\t\treturn; // No player = no change\n\t\t}\n\t\tif(this.state.paused){\n\t\t\tthis.state.player.resume();\n\t\t\tthis.setPaused(false);\n\t\t}else{\n\t\t\tthis.state.player.pause();\n\t\t\tthis.setPaused(true);\n\t\t}\n\t}\n\tregisterEvents(ee){\n\t\tif(ee.playerEventsRegistered){\n\t\t\treturn;\n\t\t}\n\t\tlet oThis = this; // original this\n\t\tee.playerEventsRegistered = true;\n\t\tee.on(\"playSong\",async function(songData){\n\t\t\t// Does not check for queue\n\t\t\tlet metadata = JSON.parse(songData.metadata);\n\t\t\tawait oThis.updateItem(\"Song\",{...metadata,...songData});\n\t\t\tawait oThis.playSong(songData);\n\t\t\toThis.setState(function (state, props) {\n\t\t\t\treturn {enabled: true}\n\t\t\t});\n\t\t});\n\n\t\tee.on(\"queueSong\",async function (songData){\t\t\t\n\t\t\toThis.setState(function (state, props) {\n\t\t\t\tlet newPlaylist = Array.from(this.state.internalPlaylist); // How to not screw up internal state\n\t\t\t\tnewPlaylist.push(songData);\n\t\t\t\t\n\t\t\t\treturn { internalPlaylist: newPlaylist };\n\t\t\t});\n\t\t});\n\t\t\n\t\tee.on(\"playing\",function(player){\n\t\t\t// Support for start/end metadata needed\n\t\t\tif(!oThis.state.duration && player.getDuration()){\n\t\t\t\toThis.updateDuration(player.getDuration());\n\t\t\t}\n\t\t\toThis.setPaused(false);\n\t\t\toThis.tick();\n\t\t});\n\n\t\tee.on(\"pause\",function(player){\n\t\t\toThis.setPaused(true);\n\t\t})\n\n\t\tee.on(\"end\", (player) => {\n\t\t\tthis.playNextSong();\n\t\t});\n\t\t\n\t}\n\tget duration(){\n\t\treturn this.state.duration;\n\t}\n\tasync updateItem(type, params) {\n\t\tlet properties = {};\n\n\t\tif (\"name\" in params) {\n\t\t\tproperties.itemName = params.name;\n\t\t}\n\t\tif (hasArtist.includes(type)) {\n\t\t\tif (\"artist\" in params) {\n\t\t\t\tproperties.itemMadeBy = params.artist;\n\t\t\t}\n\t\t}\n\t\tif (\"duration\" in params) {\n\t\t\tif(params.start){\n\t\t\t\tif(params.end){\n\t\t\t\t\tproperties.duration = params.end - params.start;\n\t\t\t\t}else{\n\t\t\t\t\tproperties.duration = params.duration - params.start;\n\t\t\t\t}\n\t\t\t}else if(params.end){\n\t\t\t\tproperties.duration = params.end;\n\t\t\t}else{\n\t\t\t\tproperties.duration = params.duration;\n\t\t\t}\n\t\t\tproperties.itemLength = properties.duration;\n\t\t} else {\n\t\t\tproperties.duration = null; // Not provided\n\t\t}\n\t\tconsole.log(\"Updating State with\",properties);\n\t\tawait this.setState(function (state, props) {\n\t\t\treturn properties;\n\t\t});\n\t}\n\tuserChangePos(ev, newVal) {\n\t\tconsole.log(\"Position changed to\", newVal);\n\t\tif(this.state.start){\n\t\t\tthis.state.player.setCurrentTime(this.state.start + newVal);\n\t\t}else{\n\t\t\tthis.state.player.setCurrentTime(newVal);\n\t\t}\n\t\tthis.setState(function (state, props) {\n\t\t\treturn { position: newVal };\n\t\t});\n\t}\n\tupdateDuration(time) {\n\t\tconsole.log(\"INFO: Duration updated to \",time);\n\t\t// Perform calculations for metadata offset\n\n\t\t// Sometimes duration can be found afterwards\n\t\tthis.setState(function (state, props) {\n\t\t\treturn { itemLength: time, duration: time };\n\t\t});\n\t}\n\t// User Drag Handlers\n\t// TODO: Account for touch displays???\n\tuserDragStart(ev){\n\t\tthis.setState(function (state, props) {\n\t\t\treturn { userDragging: true};\n\t\t});\n\t}\n\tuserDragEnd(ev){\n\t\tthis.setState(function (state, props) {\n\t\t\treturn { userDragging: false };\n\t\t});\n\t\tthis.userChangePos(ev,this.state.position);\n\t}\n\t// ! Main Rendering Code\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"player\">\n\t\t\t\t\t<Paper>\n\t\t\t\t\t\t<div className=\"player-inner\">\n\t\t\t\t\t<Grid container spacing={2}>\n\t\t\t\t\t\t<Grid item xs={2}>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<Typography variant=\"caption\">{this.state.enabled\n\t\t\t\t\t\t\t\t? (localizedFuncs[i18n.getLocale()].formatDuration(\n\t\t\t\t\t\t\t\t\t\tthis.state.position\n\t\t\t\t\t\t\t\t  ))\n\t\t\t\t\t\t\t\t: i18n.__(\"Idle Duration\")}</Typography>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<span className={styles.playerTitle}>\n\t\t\t\t\t\t<Typography variant=\"h5\">{this.state.itemName}</Typography>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className={styles.playerItemMadeBy}>\n\t\t\t\t\t\t<Typography variant=\"h6\"> {this.state.itemMadeBy}</Typography>\n\t\t\t\t\t</span>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<Grid item xs={8}>\n\t\t\t\t\t\t\t<div className=\"playback-progress\" onPointerDown={this.userDragStart.bind(this)} onPointerUp={this.userDragEnd.bind(this)}>\n\t\t\t\t\t\t\t\t<Slider\n\t\t\t\t\t\t\t\t\tvalue={this.state.position}\n\t\t\t\t\t\t\t\t\tonChange={this.userChangePos.bind(this)}\n\t\t\t\t\t\t\t\t\taria-labelledby=\"continuous-slider\"\n\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\tmax={this.state.duration}\n\t\t\t\t\t\t\t\t\tdisabled={!this.state.enabled}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\t<Box display=\"flex\" justifyContent=\"center\"><Fab color=\"primary\" aria-label=\"pause-play\" className=\"pausePlay\" onClick={this.togglePause.bind(this)}>\n\t\t\t\t\t\t\t\t\t{this.state.paused?<PlayArrowIcon></PlayArrowIcon>:<PauseIcon></PauseIcon>}\n\t\t\t\t\t\t\t\t</Fab></Box>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={2}>\n\t\t\t\t\t\t\t<Typography variant=\"caption\">{this.state.enabled\n\t\t\t\t\t\t\t\t? (\"-\" + localizedFuncs[i18n.getLocale()].formatDuration(\n\t\t\t\t\t\t\t\t\t\tthis.state.itemLength - this.state.position\n\t\t\t\t\t\t\t\t  ))\n\t\t\t\t\t\t\t\t: i18n.__(\"Idle Duration\")}</Typography>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t</div>\n\t\t\t\t\t</Paper>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\nconsole.log(\"Imported styles\", styles);\nexport { PlayerComponent };\n","module.exports = {\r\n    \"pageSize\": 25,\r\n    \"snackbarAutoHideDuration\": 5000,\r\n    \"test\": true,\r\n    \"enabledContentHandlers\":[\"./static/modules/contenthandlers/youtube\"],\r\n    \"youtubePlayerMethod\":\"./static/modules/youtube_embed_iframe\",\r\n    \"adblock\":true,\r\n    \"adblock-file\":\"easylist.blocklist\",\r\n    \"adblock-download-list\":\"http://easylist.to/easylist/easylist.txt\",\r\n    \"cookie-obliterator\":false,\r\n    \"initialWindowHeight\":600,\r\n    \"initialWindowWidth\":800,\r\n    \"customWindowbar\":false,\r\n    \"playerTickrate\":250,\r\n    \"useDarkMode\":\"system\",\r\n    \"internalServerExecutionMethod\":\"moduleLoad\",\r\n    \"telemetryJoke\":false\r\n};","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n// Fonts\n\n// broken?\n// Roboto font for material\n//import 'fontsource-roboto'; // Workaround parcel issue?\n\n// Core components\nimport { Skeleton } from \"@material-ui/lab\";\nimport { Container } from \"@material-ui/core\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core/styles\";\n// import FormGroup from \"@material-ui/core/FormGroup\";\n// import FormControlLabel from \"@material-ui/core/FormControlLabel\";\n\n// Utilites\nimport { makeStyles } from \"@material-ui/core/styles\";\n\n// Ui icons\nimport MenuIcon from \"@material-ui/icons/Menu\"; // Also called a hamburger\nimport StorageIcon from \"@material-ui/icons/Storage\";\nimport MusicNoteIcon from \"@material-ui/icons/MusicNote\";\nimport HomeRoundedIcon from \"@material-ui/icons/HomeRounded\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\n\n// Ui Widgets\n\nimport Paper from \"@material-ui/core/Paper\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Button from \"@material-ui/core/Button\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Switch from \"@material-ui/core/Switch\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\nimport Typography from \"@material-ui/core/Typography\";\nimport List from \"@material-ui/core/List\";\nimport Divider from \"@material-ui/core/Divider\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport ButtonBase from \"@material-ui/core/ButtonBase\";\nimport TouchRipple from \"@material-ui/core/ButtonBase/TouchRipple\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\nimport Popover from \"@material-ui/core/Popover\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Grid from \"@material-ui/core/Grid\";\n// List\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\n// Tables\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Select from \"@material-ui/core/Select\";\n\n// Utilities\nimport clsx from \"clsx\";\nconst { is } = require(\"electron-util\");\nconst {ipcRenderer} = require(\"electron\");\nconst EventEmitter = require(\"events\");\n\n// Reusable Player Componoent\nimport { PlayerComponent } from \"./player\";\n\nconst Store = require(\"electron-store\");\n// Settings Loading\nif (!Store) {\n\tconsole.warn(\"NO STORE found\");\n}\nimport prefdefaults from \"./prefdefaults.json\";\nconst settings = new Store({\n\tdefaults: prefdefaults,\n});\n// Constants\nconst songViewHeaders = [\"Song Name\", \"Artist\", \"Duration\"];\n\n//import {$} from \"jquery\";\nconst $ = require(\"jquery\");\nconst regeneratorRuntime = require(\"regenerator-runtime\");\nconsole.log(\"bundle :D\");\nimport { localizedFuncs } from \"./utils.js\";\nimport { TextFieldsOutlined } from \"@material-ui/icons\";\n\n// Constants\n\nconst documentID = Math.floor(Math.random() * 100000).toString();\nlet musicServer = \"http://localhost:3000\"; // NO SLASH!\nfunction capitlizeFirst(string) {\n\treturn string.charAt(0).toUpperCase() + string.slice(1);\n}\n// https://stackoverflow.com/questions/7045065/how-do-i-turn-a-javascript-dictionary-into-an-encoded-url-string\nfunction serialize(obj) {\n\tvar str = [];\n\tfor (var p in obj)\n\t\tstr.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(obj[p]));\n\treturn str.join(\"&\");\n}\nfunction calcColClass(cols) {\n\treturn \"s\" + 12 / cols;\n}\n// https://material-ui.com/components/snackbars/\nfunction Alert(props) {\n\treturn <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\nfunction placeholder(item, key) {\n\treturn <Skeleton animation=\"wave\" key={key} />;\n}\nclass ResultView extends React.PureComponent {\n\tconstructor(props) {\n\t\tsuper(props); // Deprecated but needed anyway\n\t\tthis.state = {\n\t\t\tpageIndex: 0,\n\t\t\ttype: props.type,\n\t\t\tpageData: [],\n\t\t\tconnectionFailedSnackbarOpen: false,\n\t\t\tcolumns: 3,\n\t\t};\n\t\tif (props.columns) {\n\t\t\tthis.state.columns = props.columns;\n\t\t}\n\t\tif (props.columnHeaders) {\n\t\t\tthis.state.colHeaders = props.columnHeaders.map((unlocalizedName) =>\n\t\t\t\ti18n.__(unlocalizedName)\n\t\t\t);\n\t\t} else {\n\t\t\tthis.state.colHeaders = new Array(this.state.columns).map((something) =>\n\t\t\t\ti18n.__(\"Unknown Header\")\n\t\t\t);\n\t\t}\n\t\tthis.search.bind(this)();\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tif (this.props.query !== prevProps.query) {\n\t\t\tthis.search();\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\t// Code to run when component starts\n\t\tconsole.info(\"Result View Mounted\");\n\t\tthis.search();\n\t\tlet componentThis = this;\n\t\tthis.updateSearchInterval = setInterval(function () {\n\t\t\tif (componentThis.query) {\n\t\t\t\tcomponentThis.search.bind(componentThis)();\n\t\t\t}\n\t\t}, 2500);\n\t}\n\n\tcomponentWillUnmount() {\n\t\t// Componoent dies -> deconstructor\n\t\tclearInterval(this.updateSearchInterval);\n\t}\n\thideConnectionFailureSnackbar() {\n\t\tthis.setState(function (state, props) {\n\t\t\treturn {\n\t\t\t\tconnectionFailedSnackbarOpen: false,\n\t\t\t};\n\t\t});\n\t}\n\tshowConnectionFailureSnackbar() {\n\t\tthis.setState(function (state, props) {\n\t\t\treturn {\n\t\t\t\tconnectionFailedSnackbarOpen: true,\n\t\t\t};\n\t\t});\n\t}\n\thandleConnectionFailureSnackbarClose(event, reason) {\n\t\tif (reason == \"clickaway\") {\n\t\t\treturn;\n\t\t}\n\t\tthis.hideConnectionFailureSnackbar();\n\t}\n\tasync search() {\n\t\tconsole.log(\"Running Search Request\");\n\t\tlet pageSize = settings.get(\"pageSize\");\n\t\ttry {\n\t\t\tlet resp = await (\n\t\t\t\tawait fetch(\n\t\t\t\t\tmusicServer +\n\t\t\t\t\t\t\"/api/fetch_\" +\n\t\t\t\t\t\tthis.state.type +\n\t\t\t\t\t\t\"?\" +\n\t\t\t\t\t\tserialize({\n\t\t\t\t\t\t\tlimit: pageSize,\n\t\t\t\t\t\t\toffset: pageSize * this.state.pageIndex,\n\t\t\t\t\t\t\tname: this.props.query + \"%\",\n\t\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t).json();\n\t\t\tif (resp.status == \"ok\") {\n\t\t\t\tlet data = resp.data;\n\t\t\t\tconsole.log(\"Updating data for \" + this.state.query);\n\t\t\t\tthis.setState(function (state, props) {\n\t\t\t\t\treturn { pageData: data };\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (ex) {\n\t\t\tconsole.log(\"Connection failed: showing connection failure snackbar\", ex);\n\t\t\tthis.showConnectionFailureSnackbar();\n\t\t\treturn;\n\t\t}\n\t}\n\tonRowClickActivator(index) {\n\t\tthis.props.onRowClick(this.state.pageData[index], index);\n\t}\n\trender() {\n\t\tlet outerThis = this;\n\t\tfunction colgenerator(item, index) {\n\t\t\tlet cols = [];\n\t\t\tfor (let i = 0; i < this.state.columns; i++) {\n\t\t\t\tlet elem = (\n\t\t\t\t\t<TableCell align=\"left\" key={i}>\n\t\t\t\t\t\t{outerThis.props.renderCols(item, i)}\n\t\t\t\t\t</TableCell>\n\t\t\t\t);\n\t\t\t\tcols.push(elem);\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<TableRow\n\t\t\t\t\tkey={index}\n\t\t\t\t\tonClick={this.onRowClickActivator.bind(this, index)}\n\t\t\t\t>\n\t\t\t\t\t{cols}\n\t\t\t\t</TableRow>\n\t\t\t);\n\t\t}\n\t\tlet comps = this.state.pageData.map(colgenerator.bind(this));\n\t\tlet tableHead = [];\n\t\tfor (let i = 0; i < this.state.columns; i++) {\n\t\t\ttableHead.push(\n\t\t\t\t<TableCell key={i} align=\"left\">\n\t\t\t\t\t{this.state.colHeaders[i]}\n\t\t\t\t</TableCell>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"results-wrapper\">\n\t\t\t\t\t<TableContainer component={Paper}>\n\t\t\t\t\t\t<Table>\n\t\t\t\t\t\t\t<TableHead>\n\t\t\t\t\t\t\t\t<TableRow>{tableHead}</TableRow>\n\t\t\t\t\t\t\t</TableHead>\n\t\t\t\t\t\t\t<TableBody>{comps}</TableBody>\n\t\t\t\t\t\t</Table>\n\t\t\t\t\t</TableContainer>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{i18n.__(\"Showing \")}\n\t\t\t\t\t\t{this.state.pageData.length} {i18n.__(\" items\")};\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\n\t\t\t\t<Snackbar\n\t\t\t\t\topen={this.state.connectionFailedSnackbarOpen}\n\t\t\t\t\tautoHideDuration={settings.get(\"snackbarAutoHideDuration\")}\n\t\t\t\t\tonClose={this.handleConnectionFailureSnackbarClose.bind(this)}\n\t\t\t\t>\n\t\t\t\t\t<Alert\n\t\t\t\t\t\tonClose={this.handleConnectionFailureSnackbarClose.bind(this)}\n\t\t\t\t\t\tseverity=\"error\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{i18n.__(\"Unable to establish connection to media provider\")}\n\t\t\t\t\t</Alert>\n\t\t\t\t</Snackbar>\n\t\t\t</>\n\t\t);\n\t}\n}\nclass PlaylistView extends React.Component {\n\tconstructor(props) {\n\t\tsuper();\n\t\t//super(props);\n\t\tthis.state = { searchBoxValue: \"\" };\n\t\t//this.fetchSearch = this.fetchSearch.bind(this);\n\t}\n\tcomponentDidMount() {\n\t\t// Code to run when component is destoryed -> constructor\n\t}\n\n\tcomponentWillUnmount() {\n\t\t// Componoent dies -> deconstructor\n\t}\n\tfetchSearch(event) {\n\t\t//console.log(event);\n\t\t//console.log(\"Updating Search\");\n\t\tlet searchValue = event.target.value;\n\t\t//console.log(\"New search value \"+searchValue);\n\t\tif (event.target.value) {\n\t\t\tthis.setState(function (state, props) {\n\t\t\t\treturn {\n\t\t\t\t\tsearchBoxValue: searchValue,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t}\n\tonItemClick(e) {\n\t\tconsole.log(\"Item Click\", e, this);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<TextField\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"searchbox\"\n\t\t\t\t\tonChange={this.fetchSearch.bind(this)}\n\t\t\t\t\tlabel={i18n.__(\"Type to search\")}\n\t\t\t\t\tfullWidth={true}\n\t\t\t\t/>\n\t\t\t\t<ResultView\n\t\t\t\t\ttype=\"playlists\"\n\t\t\t\t\tquery={this.state.searchBoxValue}\n\t\t\t\t\tonItemClick={this.onItemClick.bind(this)}\n\t\t\t\t></ResultView>\n\t\t\t\t<p>\n\t\t\t\t\t{i18n.__(\"Current querying \")} {settings.get(\"pageSize\")}{\" \"}\n\t\t\t\t\t{i18n.__(\" playlists matching the query \")}{\" \"}\n\t\t\t\t\t{this.state.searchBoxValue}\n\t\t\t\t</p>\n\t\t\t\t<div></div>\n\t\t\t</>\n\t\t);\n\t}\n}\nclass SongView extends React.Component {\n\tconstructor(props) {\n\t\tsuper();\n\t\t//super(props);\n\t\tthis.state = { searchBoxValue: \"\" };\n\t\t//this.fetchSearch = this.fetchSearch.bind(this);\n\t}\n\tcomponentDidMount() {\n\t\t// Code to run when component is destoryed -> constructor\n\t}\n\n\tcomponentWillUnmount() {\n\t\t// Componoent dies -> deconstructor\n\t}\n\tfetchSearch(event) {\n\t\t//console.log(event);\n\t\t//console.log(\"Updating Search\");\n\t\tlet searchValue = event.target.value;\n\t\t//console.log(\"New search value \"+searchValue);\n\t\tif (event.target.value) {\n\t\t\tthis.setState(function (state, props) {\n\t\t\t\treturn {\n\t\t\t\t\tsearchBoxValue: searchValue,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t}\n\tcreateSongNameCol(item, key) {\n\t\t// TODO: NOT USE INLINE STYLES\n\t\treturn (\n\t\t\t<div key={key}>\n\t\t\t\t<IconButton>\n\t\t\t\t\t<MusicNoteIcon />\n\t\t\t\t</IconButton>\n\t\t\t\t{item.name}\n\t\t\t</div>\n\t\t);\n\t}\n\tcreateSongArtistCol(item, key) {\n\t\treturn <div>{item.artist}</div>;\n\t}\n\tcreateDurationCol(item, key) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{localizedFuncs[i18n.getLocale()].formatDuration(item.duration)}\n\t\t\t</div>\n\t\t);\n\t}\n\trenderCols(item, index, classes) {\n\t\tlet colGenerators = [\n\t\t\tthis.createSongNameCol.bind(this),\n\t\t\tthis.createSongArtistCol.bind(this),\n\t\t\tthis.createDurationCol.bind(this),\n\t\t]; // TODO: Not hardcode this here\n\t\treturn colGenerators[index](item, index); // Execute column generator function with the index\n\t}\n\thandleRowClick(rowData, index) {\n\t\tconsole.log(rowData);\n\t\tthis.props.controller.emit(\"queueSong\", rowData);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<TextField\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"searchbox\"\n\t\t\t\t\tonChange={this.fetchSearch.bind(this)}\n\t\t\t\t\tlabel={i18n.__(\"Type to search\")}\n\t\t\t\t\tfullWidth={true}\n\t\t\t\t/>\n\t\t\t\t<ResultView\n\t\t\t\t\ttype=\"songs\"\n\t\t\t\t\tquery={this.state.searchBoxValue}\n\t\t\t\t\trenderCols={this.renderCols.bind(this)}\n\t\t\t\t\tcolumnHeaders={songViewHeaders}\n\t\t\t\t\tonRowClick={this.handleRowClick.bind(this)}\n\t\t\t\t></ResultView>\n\t\t\t\t<p>\n\t\t\t\t\t{i18n.__(\"Current querying \")} {settings.get(\"pageSize\")}{\" \"}\n\t\t\t\t\t{i18n.__(\" songs matching the query \")} {this.state.searchBoxValue}\n\t\t\t\t</p>\n\t\t\t\t<div></div>\n\t\t\t</>\n\t\t);\n\t}\n}\n// Home View\n// TODO: Populate with intresting things\nclass HomeComponent extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\tcomponentDidMount() {\n\t\t// Code to run when component is destoryed -> constructor\n\t}\n\n\tcomponentWillUnmount() {\n\t\t// Componoent dies -> deconstructor\n\t}\n\tstateChange() {\n\t\tthis.setState(function (state, props) {\n\t\t\treturn {};\n\t\t});\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Typography variant=\"h3\">\n\t\t\t\t\t{i18n.__(\"Hello! This is the default homescreen for now. \")}\n\t\t\t\t</Typography>\n\t\t\t</>\n\t\t);\n\t}\n}\n\n// Settings\nconst settingsStyles = makeStyles((theme) => ({\n\tpopover: {\n\t\tpointerEvents: \"none\",\n\t},\n\tpaper: {\n\t\tpadding: theme.spacing(1),\n\t},\n\tbuttonrow: {\n\t\t\"& > *\": {\n\t\t\tmargin: theme.spacing(1),\n\t\t},\n\t},\n\tsettingsGrid: {\n\t\tpadding: theme.spacing(2),\n\t},\n}));\n\nfunction SettingsView() {\n\tconst classes = settingsStyles();\n\n\tlet [curDisplayConfig, setDisplayConfig] = React.useState(() => {\n\t\tlet copyOfSettings = {};\n\t\tfor (let settingsPair of settings) {\n\t\t\tcopyOfSettings[settingsPair[0]] = settingsPair[1];\n\t\t}\n\t\treturn copyOfSettings;\n\t});\n\tlet [applying, setApplying] = React.useState(false);\n\tlet [internalServerOnline, setInternalServerOnline] = React.useState(false);\n\tlet [applyFinishSnackbarOpen, setApplyFinishedSnackbarOpen] = React.useState(\n\t\tfalse\n\t);\n\tfunction showApplyFinishSnackbar(ev) {\n\t\tsetApplyFinishedSnackbarOpen(true);\n\t}\n\tfunction hideApplyFinishSnackbar(ev) {\n\t\tsetApplyFinishedSnackbarOpen(false);\n\t}\n\tfunction saveConfig(ev) {\n\t\tsetApplying(true);\n\t\tconsole.log(\"Saving Configuration from display\");\n\t\tlet keys = Object.keys(curDisplayConfig);\n\t\tfor (let i = 0; i < keys.length; i++) {\n\t\t\tlet key = keys[i];\n\t\t\tif (settings.has(key)) {\n\t\t\t\tif (settings.get(key) != curDisplayConfig[key]) {\n\t\t\t\t\tsettings.set(key, curDisplayConfig[key]); // Update!\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tsetTimeout(() => {\n\t\t\tsetApplying(false);\n\t\t\tsetApplyFinishedSnackbarOpen(true);\n\t\t}, 200); // Allow brief animation\n\t}\n\t// A joke\n\tconst [jokeAnchorEl, setJokeAnchorEl] = React.useState(null);\n\tconst handleJokePopoverOpen = (event) => {\n\t\tsetJokeAnchorEl(event.currentTarget);\n\t};\n\tconst handleJokePopoverClose = () => {\n\t\tsetJokeAnchorEl(null);\n\t};\n\tconst jokePopoverOpen = Boolean(jokeAnchorEl);\n\tfunction toggleTelemetryJokeSwitch(ev) {\n\t\tnewConfig[\"telemetryJoke\"] = ev.target.checked;\n\t\tupdateDisplayConfig();\n\t}\n\t// Render!!!\n\tlet newConfig = {};\n\tfunction updateDisplayConfig() {\n\t\tsetDisplayConfig({ ...curDisplayConfig, ...newConfig });\n\t}\n\tfunction createSwitchFunction(toggleKey) {\n\t\tlet outputFunc = (ev) => {\n\t\t\tnewConfig[toggleKey] = ev.target.checked;\n\t\t\tupdateDisplayConfig();\n\t\t};\n\t\treturn outputFunc;\n\t}\n\tfunction updateSnackbarHideDuration(ev) {\n\t\tlet newDuration = ev.target.value * 1000; // back to ms\n\t\tnewConfig[\"snackbarAutoHideDuration\"] = newDuration;\n\t\tupdateDisplayConfig();\n\t}\n\n\tfunction handleThemeChange(ev){\n\t\tnewConfig[\"useDarkMode\"] = ev.target.value;\n\t\tupdateDisplayConfig();\n\t}\n\t// Internal Server\n\tfunction updateInternalServerState(ev,data){\n\t\tconsole.log(\"Internal Server State Update recieved\");\n\t\tsetInternalServerOnline(data.online);\n\t}\n\tReact.useEffect(() => {\n\t\tipcRenderer.on(\"internalServerUpdates\",updateInternalServerState);\n\t\treturn () => {\n\t\t\tipcRenderer.removeListener(\"internalServerUpdates\",updateInternalServerState);\n\t\t};\n\t});\n\tfunction startInternalServer(){\n\t\tipcRenderer.send(\"internalServer\",\"start\");\n\t}\n\n\tfunction stopInternalServer(){\n\t\tipcRenderer.send(\"internalServer\",\"stop\");\n\t}\n\t// Temporary stuffz\n\tconst optionSpacing = 3; // Config option?\n\tconst explainationXS = 11;\n\tconst optionFormXS = 1;\n\treturn (\n\t\t<div className=\"settings\">\n\t\t\t<Backdrop className={classes.backdrop} open={applying}>\n\t\t\t\t<CircularProgress color=\"inherit\" />\n\t\t\t</Backdrop>\n\t\t\t<Typography variant=\"h3\">{i18n.__(\"Telemetry\")}</Typography>\n\t\t\t<Popover\n\t\t\t\tclassName={classes.popover}\n\t\t\t\tclasses={{\n\t\t\t\t\tpaper: classes.paper,\n\t\t\t\t}}\n\t\t\t\topen={jokePopoverOpen}\n\t\t\t\tanchorEl={jokeAnchorEl}\n\t\t\t\tanchorOrigin={{\n\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t}}\n\t\t\t\ttransformOrigin={{\n\t\t\t\t\tvertical: \"top\",\n\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t}}\n\t\t\t\tdisableRestoreFocus\n\t\t\t>\n\t\t\t\t{i18n.__(\"This is a joke\")}\n\t\t\t</Popover>\n\t\t\t<Grid container spacing={optionSpacing}>\n\t\t\t\t<Grid item xs={explainationXS}>\n\t\t\t\t\t<Typography variant=\"body1\">\n\t\t\t\t\t\t{i18n.__(\"Enable complete data collection:\")}\n\t\t\t\t\t</Typography>\n\t\t\t\t</Grid>\n\n\t\t\t\t<Grid item xs={optionFormXS}>\n\t\t\t\t\t<Switch\n\t\t\t\t\t\tchecked={curDisplayConfig[\"telemetryJoke\"]}\n\t\t\t\t\t\tonChange={toggleTelemetryJokeSwitch}\n\t\t\t\t\t\tonMouseEnter={handleJokePopoverOpen}\n\t\t\t\t\t\tonMouseLeave={handleJokePopoverClose}\n\t\t\t\t\t></Switch>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t\t<Typography variant=\"h3\">{i18n.__(\"User Interface\")}</Typography>\n\t\t\t<Grid container spacing={optionSpacing}>\n\t\t\t\t<Grid item xs={explainationXS}>\n\t\t\t\t\t<Typography variant=\"body1\">\n\t\t\t\t\t\tSnackbar Auto Hide Duration in seconds\n\t\t\t\t\t</Typography>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={optionFormXS}>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\tdefaultValue={curDisplayConfig[\"snackbarAutoHideDuration\"] / 1000}\n\t\t\t\t\t\tonChange={updateSnackbarHideDuration}\n\t\t\t\t\t></TextField>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={explainationXS}>\n\t\t\t\t\t<Typography variant=\"body1\">Theme</Typography>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={optionFormXS}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tonChange={handleThemeChange}\n\t\t\t\t\t\tvalue={curDisplayConfig[\"useDarkMode\"]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<MenuItem value={false}>Light</MenuItem>\n\t\t\t\t\t\t<MenuItem value={true}>Dark</MenuItem>\n\t\t\t\t\t\t<MenuItem value={\"system\"}>System Theme</MenuItem>\n\t\t\t\t\t</Select>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t\t<Typography variant=\"h3\">{i18n.__(\"Ad Blocking\")}</Typography>\n\n\t\t\t<Typography variant=\"h3\">{i18n.__(\"Internal Server\")}</Typography>\n\t\t\t<div className={classes.buttonrow}>\n\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={startInternalServer} disabled={internalServerOnline}>\n\t\t\t\t\t{i18n.__(\"Start Internal Server\")}\n\t\t\t\t</Button>\n\n\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={stopInternalServer} disabled={!internalServerOnline}>\n\t\t\t\t\t{i18n.__(\"Stop Internal Server\")}\n\t\t\t\t</Button>\n\n\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={() => ipcRenderer.send(\"internalServer\",\"getUpdate\")}>\n\t\t\t\t\t{i18n.__(\"Force Internal Server Ui Update\")}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t\t<Typography variant=\"h3\">{i18n.__(\"Save Settings\")}</Typography>\n\t\t\t<Typography variant=\"body1\">\n\t\t\t\t{i18n.__(\n\t\t\t\t\t\"Some settings require you to restart Pulsify entirely as they are queried only during the startup. \"\n\t\t\t\t)}\n\t\t\t</Typography>\n\t\t\t<div className={classes.buttonrow}>\n\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={saveConfig}>\n\t\t\t\t\t{i18n.__(\"Save\")}\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\tonClick={(ev) => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{i18n.__(\"Reload\")}\n\t\t\t\t</Button>\n\t\t\t\t<Snackbar\n\t\t\t\t\topen={applyFinishSnackbarOpen}\n\t\t\t\t\tautoHideDuration={settings.get(\"snackbarAutoHideDuration\")}\n\t\t\t\t\tonClose={hideApplyFinishSnackbar}\n\t\t\t\t>\n\t\t\t\t\t<Alert onClose={hideApplyFinishSnackbar} severity=\"success\">\n\t\t\t\t\t\t{i18n.__(\"Settings have been saved succesfully\")}\n\t\t\t\t\t</Alert>\n\t\t\t\t</Snackbar>\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t);\n}\n// Drawer\nclass MainDrawerComponent extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\ttriggerView(viewName) {\n\t\treturn ((event) => this.props.setCurView(viewName)).bind(this);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div onClick={this.props.drawerToggle}>\n\t\t\t\t<List>\n\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t<Typography variant=\"h3\">{i18n.__(\"App Name\")}</Typography>\n\t\t\t\t\t</ListItem>\n\t\t\t\t\t<ListItem button onClick={this.triggerView(\"homeview\")}>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<HomeRoundedIcon />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary={\"Home\"}></ListItemText>\n\t\t\t\t\t</ListItem>\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<ListItem button onClick={this.triggerView(\"songs\")}>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<MusicNoteIcon />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary={i18n.__(\"Songs\")}></ListItemText>\n\t\t\t\t\t</ListItem>\n\t\t\t\t\t<ListItem button onClick={this.triggerView(\"settings\")}>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<SettingsIcon />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary={i18n.__(\"Settings\")}></ListItemText>\n\t\t\t\t\t</ListItem>\n\t\t\t\t</List>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n// Main Comp\nfunction MainComponent() {\n\t// Theme Logic\n\tlet useDarkMode = useMediaQuery(\"(prefers-color-scheme: dark)\");\n\tif (settings.get(\"useDarkMode\") != \"system\") {\n\t\tuseDarkMode = settings.get(\"useDarkMode\");\n\t}\n\tconst theme = React.useMemo(\n\t\t() =>\n\t\t\tcreateMuiTheme({\n\t\t\t\tpalette: {\n\t\t\t\t\ttype: useDarkMode ? \"dark\" : \"light\",\n\t\t\t\t},\n\t\t\t}),\n\t\t[useDarkMode]\n\t);\n\n\t// Handle Menu Logic\n\tlet [serversAnchorEl, setServersAnchorEl] = React.useState(null);\n\tlet [drawerOpen, setDrawerOpen] = React.useState(false);\n\tfunction toggleDrawer(event) {\n\t\tsetDrawerOpen(!drawerOpen);\n\t}\n\tfunction handleMenu(event) {\n\t\tconsole.log(this);\n\t\tsetServersAnchorEl(event.target);\n\t}\n\tfunction handleClose(event) {\n\t\tconsole.log(this);\n\t\tsetServersAnchorEl(null);\n\t}\n\n\t//let [open] = React.useState(true);\n\t// Current View\n\tlet [curView, setCurView] = React.useState(\"homeview\");\n\tconst serversOpen = Boolean(serversAnchorEl);\n\tconst [controller, changeController] = React.useState(new EventEmitter());\n\n\t// Legacy Views System\n\tlet views = {};\n\tviews.playlists = <PlaylistView />;\n\tviews.songs = <SongView controller={controller} />;\n\tviews.homeview = <HomeComponent />;\n\tviews.settings = <SettingsView></SettingsView>;\n\twindow.debug = {};\n\twindow.debug.views = views;\n\tconst stylesSet = makeStyles((theme) => ({\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\ttitle: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\tmenuButton: {\n\t\t\tmarginRight: theme.spacing(2),\n\t\t},\n\t}));\n\tconst classes = stylesSet();\n\treturn (\n\t\t<>\n\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t<CssBaseline />\n\t\t\t\t<div className={classes.root}>\n\t\t\t\t\t<Drawer anchor=\"left\" open={drawerOpen} onClick={toggleDrawer}>\n\t\t\t\t\t\t<MainDrawerComponent\n\t\t\t\t\t\t\tdrawerToggle={toggleDrawer}\n\t\t\t\t\t\t\tsetCurView={setCurView}\n\t\t\t\t\t\t></MainDrawerComponent>\n\t\t\t\t\t</Drawer>\n\t\t\t\t\t<AppBar position=\"static\">\n\t\t\t\t\t\t<Toolbar>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tedge=\"start\"\n\t\t\t\t\t\t\t\tclassName={classes.menuButton}\n\t\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t\t\taria-label=\"menu\"\n\t\t\t\t\t\t\t\tonClick={toggleDrawer}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\n\t\t\t\t\t\t\t\t{i18n.__(\"App Name\")}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t\t\t\taria-label=\"Switch Media Server\"\n\t\t\t\t\t\t\t\t\taria-controls=\"menu-appbar\"\n\t\t\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\t\t\tonClick={handleMenu}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<StorageIcon />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\t\t\tid=\"menu-appbar\"\n\t\t\t\t\t\t\t\t\tanchorEl={serversAnchorEl}\n\t\t\t\t\t\t\t\t\tanchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n\t\t\t\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t\t\t\t\ttransformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n\t\t\t\t\t\t\t\t\tonClose={handleClose}\n\t\t\t\t\t\t\t\t\topen={serversOpen}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<MenuItem onClick={setServer}>Local</MenuItem>\n\t\t\t\t\t\t\t\t\t<MenuItem onClick={setServer}>Add new server</MenuItem>\n\t\t\t\t\t\t\t\t</Menu>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t</AppBar>\n\t\t\t\t\t<Container maxWidth=\"md\">{views[curView]}</Container>\n\n\t\t\t\t\t<PlayerComponent settings={settings} controller={controller} />\n\t\t\t\t</div>\n\t\t\t</ThemeProvider>\n\t\t</>\n\t);\n}\n// Bootstrap code\n// really odd part i'm learning\n\nfunction setServer(comp) {}\n\n$(function () {\n\t// TODO: Replace with Vanilla JS to make script size smaller\n\tif (settings.get(\"customWindowbar\")) {\n\t\tconst customTitlebar = require(\"custom-electron-titlebar\");\n\n\t\tnew customTitlebar.Titlebar({\n\t\t\tbackgroundColor: customTitlebar.Color.fromHex(\"#444\"),\n\t\t});\n\t\tif (is.development) {\n\t\t\t$(\"#menufix\").remove();\n\t\t\t$('.hide-for-dev').remove();\n\t\t} else {\n\t\t\t$('.hide-for-prod').remove();\n\t\t\t$(\"div[role=menubar]\").remove();\n\t\t}\n\t}\n\tReactDOM.render(<MainComponent />, document.getElementById(\"root\"));\n});\n\nconsole.log(\"Player Comp\", PlayerComponent);\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}