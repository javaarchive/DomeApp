process.env.HMR_PORT=0;process.env.HMR_HOSTNAME="localhost";parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"YafY":[function(require,module,exports) {
module.exports={player_font:"_player_font_7a16e","drop-shadow":"_drop-shadow_7a16e",playerTitle:"_playerTitle_7a16e",playerItemMadeBy:"_playerItemMadeBy_7a16e"};
},{}],"FOZT":[function(require,module,exports) {
"use strict";function t(t){if(!t)return"---";let o=t,r="";return o>3600&&(r+=Math.floor(o/3600)+":",o%=3600),r+=Math.floor(o/60).toString().padStart(2,"0")+":"+(o%60).toString().padStart(2,"0")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.localizedFuncs=void 0;const o={en:{formatDuration:t}};exports.localizedFuncs=o;
},{}],"qbJK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlayerComponent=void 0;var e=s(require("react")),t=s(require("react-dom")),a=s(require("./player.module.css")),n=s(require("@material-ui/core/Typography")),r=s(require("@material-ui/core/Grid")),i=s(require("@material-ui/core/Slider")),l=require("./utils.js");function s(e){return e&&e.__esModule?e:{default:e}}const o=require("events"),u=["Song"],d=["Album"];if(!c)try{var c=require("i18n")}catch(f){c=null}class m extends e.default.Component{constructor(e){super(e);let t={itemName:c.__("Nothing Playing"),position:0,itemLength:0,length:1200,enabled:!1,userDragging:!1,internalPlaylist:[]};e.name&&(t.name=e.name,t.enabled=!0),e.controller?t.controller=e.controller:t.controller=new o,this.state=t}componentDidMount(){}setNewController(e){this.setState(function(t,a){return{controller:e}})}registerEvents(e){if(e.playerEventsRegistered)return;e.playerEventsRegistered=!0,e.on("queueSong",function(){})}componentWillUnmount(){}updateItem(e,t){let a={};"name"in t&&(a.itemName=t.name),u.includes(e)&&"artist"in t&&(a.itemMadeBy=t.artist),a.duration="duration"in t?t.duration:null,this.setState(function(e,t){return a})}changePos(e,t){console.log("Position changed to",t),this.setState(function(e,a){return{position:t}})}updateDuration(e){this.setState(function(t,a){return{itemDuration:e}})}userDragStart(e){this.setState(function(e,t){return{userDragging:!0}})}userDragEnd(e){this.setState(function(e,t){return{userDragging:!1}})}render(){return e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{className:"player"},e.default.createElement(r.default,{container:!0,spacing:2},e.default.createElement(r.default,{item:!0,xs:2},e.default.createElement(n.default,{variant:"caption"},this.state.enabled?l.localizedFuncs[c.getLocale()].formatDuration(this.state.position):c.__("Idle Duration"))),e.default.createElement(r.default,{item:!0,xs:8},e.default.createElement("div",{className:"playback-progress",onPointerDown:this.userDragStart.bind(this),onPointerUp:this.userDragEnd.bind(this)},e.default.createElement(i.default,{value:this.state.position,onChange:this.changePos.bind(this),"aria-labelledby":"continuous-slider",min:0,max:this.state.length,disabled:!this.state.enabled}))),e.default.createElement(r.default,{item:!0,xs:2},e.default.createElement(n.default,{variant:"caption"},this.state.enabled?"-"+l.localizedFuncs[c.getLocale()].formatDuration(this.state.itemLength-this.state.position):c.__("Idle Duration")))),e.default.createElement("span",{className:a.default.playerTitle},e.default.createElement(n.default,{variant:"h5"},this.state.itemName)),e.default.createElement("span",{className:a.default.playerItemMadeBy},e.default.createElement(n.default,{variant:"h6"},this.state.itemMadeBy))))}}exports.PlayerComponent=m,console.log("Imported styles",a.default);
},{"./player.module.css":"YafY","./utils.js":"FOZT"}],"XPVq":[function(require,module,exports) {
module.exports={pageSize:25,snackbarAutoHideDuration:5e3,test:!0,enabledContentHandlers:["youtube"],youtubePlayerMethod:"iframe",fallbackYoutubePlayerMethod:"browserView"};
},{}],"J20K":[function(require,module,exports) {
"use strict";var e=U(require("react")),t=U(require("react-dom")),a=require("@material-ui/lab"),l=require("@material-ui/core"),r=U(require("@material-ui/core/CssBaseline")),n=U(require("@material-ui/core/useMediaQuery")),i=require("@material-ui/core/styles"),u=U(require("@material-ui/icons/Menu")),o=U(require("@material-ui/icons/Storage")),c=U(require("@material-ui/icons/MusicNote")),s=U(require("@material-ui/icons/HomeRounded")),d=U(require("@material-ui/icons/Settings")),m=U(require("@material-ui/core/Paper")),f=U(require("@material-ui/core/AppBar")),h=U(require("@material-ui/core/Drawer")),p=U(require("@material-ui/core/IconButton")),g=U(require("@material-ui/core/Switch")),E=U(require("@material-ui/core/Toolbar")),C=U(require("@material-ui/core/MenuItem")),b=U(require("@material-ui/core/Menu")),q=U(require("@material-ui/core/Typography")),y=U(require("@material-ui/core/List")),k=U(require("@material-ui/core/Divider")),S=U(require("@material-ui/core/TextField")),w=U(require("@material-ui/core/Snackbar")),v=U(require("@material-ui/core/ButtonBase")),_=U(require("@material-ui/lab/Alert")),x=U(require("@material-ui/core/ListItem")),D=U(require("@material-ui/core/ListItemIcon")),I=U(require("@material-ui/core/ListItemText")),B=U(require("@material-ui/core/Table")),F=U(require("@material-ui/core/TableBody")),T=U(require("@material-ui/core/TableCell")),M=U(require("@material-ui/core/TableContainer")),R=U(require("@material-ui/core/TableHead")),V=U(require("@material-ui/core/TableRow")),A=U(require("clsx")),H=require("./player"),N=U(require("./prefdefaults.json")),O=require("./utils.js");function U(e){return e&&e.__esModule?e:{default:e}}function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e}).apply(this,arguments)}const P=require("electron-store");P||console.warn("NO STORE found");const W=new P({defaults:N.default}),z=["Song Name","Artist","Duration"],L=require("jquery"),G=require("regenerator-runtime");console.log("bundle :D");let Q="http://localhost:3000";function J(e){return e.charAt(0).toUpperCase()+e.slice(1)}function K(e){var t=[];for(var a in e)t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")}function X(e){return"s"+12/e}function Y(t){return e.default.createElement(_.default,j({elevation:6,variant:"filled"},t))}function Z(t,l){return e.default.createElement(a.Skeleton,{animation:"wave",key:l})}class $ extends e.default.PureComponent{constructor(e){super(e),this.state={pageIndex:0,type:e.type,pageData:[],connectionFailedSnackbarOpen:!1,columns:3},e.columns&&(this.state.columns=e.columns),e.columnHeaders?this.state.colHeaders=e.columnHeaders.map(e=>i18n.__(e)):this.state.colHeaders=new Array(this.state.columns).map(e=>i18n.__("Unknown Header")),this.search.bind(this)()}componentDidUpdate(e){this.props.query!==e.query&&this.search()}componentDidMount(){console.info("Result View Mounted"),this.search();let e=this;this.updateSearchInterval=setInterval(function(){e.query&&e.search.bind(e)()},2500)}componentWillUnmount(){clearInterval(this.updateSearchInterval)}hideConnectionFailureSnackbar(){this.setState(function(e,t){return{connectionFailedSnackbarOpen:!1}})}showConnectionFailureSnackbar(){this.setState(function(e,t){return{connectionFailedSnackbarOpen:!0}})}handleConnectionFailureSnackbarClose(e,t){"clickaway"!=t&&this.hideConnectionFailureSnackbar()}async search(){console.log("Running Search Request");let e=W.get("pageSize");try{let a=await(await fetch(Q+"/api/fetch_"+this.state.type+"?"+K({limit:e,offset:e*this.state.pageIndex,name:this.props.query+"%"}))).json();if("ok"==a.status){let e=a.data;console.log("Updating data for "+this.state.query),this.setState(function(t,a){return{pageData:e}})}}catch(t){return console.log("Connection failed: showing connection failure snackbar",t),void this.showConnectionFailureSnackbar()}}onRowClickActivator(e){this.props.onRowClick(this.state.pageData[e],e)}render(){let t=this;let a=this.state.pageData.map(function(a,l){let r=[];for(let n=0;n<this.state.columns;n++){let l=e.default.createElement(T.default,{key:n},t.props.renderCols(a,n));r.push(l)}return e.default.createElement(V.default,{key:l,onClick:this.onRowClickActivator.bind(this,l)},r)}.bind(this)),l=[];for(let r=0;r<this.state.columns;r++)l.push(e.default.createElement(T.default,{key:r},this.state.colHeaders[r]));return e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{className:"results-wrapper"},e.default.createElement(M.default,{component:m.default},e.default.createElement(B.default,null,e.default.createElement(R.default,null,e.default.createElement(V.default,null,l)),e.default.createElement(F.default,null,a))),e.default.createElement("p",null,i18n.__("Showing "),this.state.pageData.length," ",i18n.__(" items"),";")),e.default.createElement(w.default,{open:this.state.connectionFailedSnackbarOpen,autoHideDuration:W.get("snackbarAutoHideDuration"),onClose:this.handleConnectionFailureSnackbarClose.bind(this)},e.default.createElement(Y,{onClose:this.handleConnectionFailureSnackbarClose.bind(this),severity:"error"},i18n.__("Unable to establish connection to media provider"))))}}class ee extends e.default.Component{constructor(e){super(),this.state={searchBoxValue:""}}componentDidMount(){}componentWillUnmount(){}fetchSearch(e){let t=e.target.value;e.target.value&&this.setState(function(e,a){return{searchBoxValue:t}})}onItemClick(e){console.log("Item Click",e,this)}render(){return e.default.createElement(e.default.Fragment,null,e.default.createElement(S.default,{type:"text",className:"searchbox",onChange:this.fetchSearch.bind(this),label:i18n.__("Type to search"),fullWidth:!0}),e.default.createElement($,{type:"playlists",query:this.state.searchBoxValue,onItemClick:this.onItemClick.bind(this)}),e.default.createElement("p",null,i18n.__("Current querying ")," ",W.get("pageSize")," ",i18n.__(" playlists matching the query ")," ",this.state.searchBoxValue),e.default.createElement("div",null))}}class te extends e.default.Component{constructor(e){super(),this.state={searchBoxValue:""}}componentDidMount(){}componentWillUnmount(){}fetchSearch(e){let t=e.target.value;e.target.value&&this.setState(function(e,a){return{searchBoxValue:t}})}createSongNameCol(t,a){return e.default.createElement("div",{key:a},e.default.createElement(p.default,null,e.default.createElement(c.default,null)),t.name)}createSongArtistCol(t,a){return e.default.createElement("div",null,t.artist)}createDurationCol(t,a){return e.default.createElement("div",null,O.localizedFuncs[i18n.getLocale()].formatDuration(t.duration))}renderCols(e,t,a){return[this.createSongNameCol.bind(this),this.createSongArtistCol.bind(this),this.createDurationCol.bind(this)][t](e,t)}handleRowClick(e,t){console.log(e)}render(){return e.default.createElement(e.default.Fragment,null,e.default.createElement(S.default,{type:"text",className:"searchbox",onChange:this.fetchSearch.bind(this),label:i18n.__("Type to search"),fullWidth:!0}),e.default.createElement($,{type:"songs",query:this.state.searchBoxValue,renderCols:this.renderCols.bind(this),columnHeaders:z,onRowClick:this.handleRowClick.bind(this)}),e.default.createElement("p",null,i18n.__("Current querying ")," ",W.get("pageSize")," ",i18n.__(" songs matching the query ")," ",this.state.searchBoxValue),e.default.createElement("div",null))}}class ae extends e.default.Component{constructor(e){super(e),this.state={}}componentDidMount(){}componentWillUnmount(){}stateChange(){this.setState(function(e,t){return{}})}render(){return e.default.createElement(e.default.Fragment,null,e.default.createElement(q.default,{variant:"h3"},i18n.__("Hello! This is the default homescreen for now. ")))}}class le extends e.default.Component{constructor(e){super(e),this.state={}}triggerView(e){return(t=>this.props.setCurView(e)).bind(this)}render(){return e.default.createElement("div",{onClick:this.props.drawerToggle},e.default.createElement(y.default,null,e.default.createElement(x.default,null,e.default.createElement(q.default,{variant:"h3"},i18n.__("App Name"))),e.default.createElement(x.default,{button:!0,onClick:this.triggerView("homeview")},e.default.createElement(D.default,null,e.default.createElement(s.default,null)),e.default.createElement(I.default,{primary:"Home"})),e.default.createElement(k.default,null),e.default.createElement(x.default,{button:!0,onClick:this.triggerView("songs")},e.default.createElement(D.default,null,e.default.createElement(c.default,null)),e.default.createElement(I.default,{primary:i18n.__("Songs")})),e.default.createElement(x.default,{button:!0,onClick:this.triggerView("settings")},e.default.createElement(D.default,null,e.default.createElement(d.default,null)),e.default.createElement(I.default,{primary:i18n.__("Settings")}))))}}let re={};function ne(){const t=(0,n.default)("(prefers-color-scheme: dark)"),a=e.default.useMemo(()=>(0,i.createMuiTheme)({palette:{type:t?"dark":"light"}}),[t]);let[c,s]=e.default.useState(null),[d,m]=e.default.useState(!1);function g(e){m(!d)}let[y,k]=e.default.useState("homeview");const S=Boolean(c),w=(0,i.makeStyles)(e=>({root:{flexGrow:1},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}))();return e.default.createElement(e.default.Fragment,null,e.default.createElement(i.ThemeProvider,{theme:a},e.default.createElement(r.default,null),e.default.createElement("div",{className:w.root},e.default.createElement(h.default,{anchor:"left",open:d,onClick:g},e.default.createElement(le,{drawerToggle:g,setCurView:k})),e.default.createElement(f.default,{position:"static"},e.default.createElement(E.default,null,e.default.createElement(p.default,{edge:"start",className:w.menuButton,color:"inherit","aria-label":"menu",onClick:g},e.default.createElement(u.default,null)),e.default.createElement(q.default,{variant:"h6",className:w.title},i18n.__("App Name")),e.default.createElement("div",null,e.default.createElement(p.default,{color:"inherit","aria-label":"Switch Media Server","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){console.log(this),s(e.target)}},e.default.createElement(o.default,null)),e.default.createElement(b.default,{id:"menu-appbar",anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},onClose:function(e){console.log(this),s(null)},open:S},e.default.createElement(C.default,{onClick:ie},"Local"),e.default.createElement(C.default,{onClick:ie},"Add new server"))))),e.default.createElement(l.Container,{maxWidth:"md"},re[y]),e.default.createElement(H.PlayerComponent,null))))}function ie(e){}re.playlists=e.default.createElement(ee,null),re.songs=e.default.createElement(te,null),re.homeview=e.default.createElement(ae,null),window.debug={},window.debug.views=re,L(function(){t.default.render(e.default.createElement(ne,null),document.getElementById("root"))}),console.log("Player Comp",H.PlayerComponent);
},{"./player":"qbJK","./prefdefaults.json":"XPVq","./utils.js":"FOZT"}]},{},["J20K"], null)
//# sourceMappingURL=/bundle.js.map